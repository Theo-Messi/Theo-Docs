---
outline: deep
title: 阿里云盘签到
editLink: true
head:
  - - meta
    - name: keywords
      content: 京东 签到 Cookie 插件 EditThisCookie 阿里云盘
---

## 获取 refresh_token

### 自动获取

- 登录[阿里云盘](https://www.aliyundrive.com/drive/)后，控制台粘贴

```sh
copy(JSON.parse(localStorage.token).refresh_token); console.log(JSON.parse(localStorage.token).refresh_token);
```

![](https://github.com/mrabit/aliyundriveDailyCheck/raw/master/assets/refresh_token_1.png)

### 手动获取

- 登录[阿里云盘](https://www.aliyundrive.com/drive/)
- 在`开发者工具` -> `Application` -> `Local Storage` 中的 `token` 字段中找到。
- 注意：不是复制整段 `JSON` 值，而是 `JSON` 里 `refresh_token` 字段的值，如下图所示红色部分：
  ![](https://github.com/mrabit/aliyundriveDailyCheck/raw/master/assets/refresh_token_2.png)

## 青龙面板添加依赖项

- axios

## 添加环境变量

:::tip
`CLIENT_ID` 需添加 `环境变量` 权限
:::
|参数|说明|
|---|---|
|`refreshToken`| 阿里云盘 refresh_token, 添加多个可支持多账户签到|
|`CLIENT_ID`(可选项)| 用于青龙面板 API 更新 refreshToken 字段|
|`CLIENT_SECRET`(可选项)|用于青龙面板 API 更新 refreshToken 字段|
|`QL_PATH`(可选项)|青龙面板 path|

- `CLIENT_ID` 和 `CLIENT_SECRET` 可在 `青龙面板` -> `系统设置` -> `应用设置` -> `新建应用` 新增, 用于自动更新环境变量内 `refreshToken` 配置

## 添加订阅

添加订阅后可在定时任务列表发现新增任务, 可自行调整任务执行时间

```sh
ql repo https://github.com/mrabit/aliyundriveDailyCheck.git "autoSignin" "" "qlApi"
```

### 新版本:

- `青龙面板 -> 订阅管理 -> 新建订阅`
- 在名称输入框粘贴命令并执行

### 旧版本:

- `青龙面板 -> 定时任务 -> 新建任务`
- 添加命令并执行
